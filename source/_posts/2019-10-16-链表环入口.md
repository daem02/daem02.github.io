---
title: 链表环入口
date: 2019-10-16 09:58:19
tags:
- 题解
- 链表
- 数学
categories:
- 剑指
---

# Question
给一个链表，若其中包含环，请找出该链表的环的入口结点，否则，输出null。
<!-- more -->

# Solution
![示意图](/images/20191016.png)
通过两个快慢指针来判断是否存在环，若存在环，快指针最终必定在环内再次赶上慢指针；不存在环，则快指针先到达链表尾节点。

图中A是起点，B是环入口，C是快慢指针相遇的点，相遇时，快指针遍历的节点个数为：

quick = x + a + b + a  //快指针赶上慢指针必定是一个环的路程再加上慢指针在环上的路程

慢指针遍历的节点个数：

slow = x + a

因为快指针2倍速于慢指针，所以有:
quick = 2 * slow

即：
x+a+b+a = 2*(x+a)

=> x = b

所以两指针相遇后，再设置一个从头开始的指针，与此时的慢指针一起跑，则在下一次慢指针与这个新指针相遇的地方就是环的入口。

```python3
# -*- coding:utf-8 -*-
# class ListNode:
#     def __init__(self, x):
#         self.val = x
#         self.next = None
class Solution:
    def EntryNodeOfLoop(self, pHead):
        # write code here
        pSlow = pHead
        pQuick = pHead
        while pQuick and pQuick.next:
            pQuick = pQuick.next.next
            pSlow = pSlow.next
            if pSlow==pQuick:
                pt = pHead
                while pt!=pSlow:
                    pt = pt.next
                    pSlow = pSlow.next
                return pt
        return None
```